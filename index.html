<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>学生証メーカー</title>

<style>
body {
  font-family: sans-serif;
  padding: 30px;
}

.container {
  display: flex;
  gap: 30px;
}

canvas {
  border: 1px solid #333;
}

input, select {
  width: 240px;
  margin-bottom: 10px;
}
</style>
</head>
<body>

<h2>学生証作成</h2>

<div class="container">

  <!-- 左：完成プレビュー -->
  <canvas id="cardCanvas" width="600" height="350"></canvas>

  <!-- 右：入力 -->
  <div>
    <select id="template">
      <option value="red">赤テンプレ</option>
      <option value="blue">青テンプレ</option>
    </select>

    <input class="value" placeholder="学校名">
    <input class="value" placeholder="学科">
    <input class="value" placeholder="名前">
    <input class="value" type="date">
    <input class="value" type="date">

    <input type="file" id="photo" accept="image/*">
  </div>

</div>

<script>
const canvas = document.getElementById("cardCanvas");
const ctx = canvas.getContext("2d");

const values = document.querySelectorAll(".value");

const templates = {
  red: "学生証_1.png",
  blue: "学生証_2.png"
};

function draw() {
  const template = document.getElementById("template").value;
  const img = new Image();
  img.src = templates[template];

  img.onload = () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // ① テンプレ
    ctx.drawImage(img, 0, 0, 600, 350);

    // ② 文字
    ctx.fillStyle = "#000";
    ctx.font = "18px sans-serif";

    ctx.fillText(values[0].value || "学校名", 250, 120);
    ctx.fillText(values[1].value || "学科", 250, 150);
    ctx.fillText(values[2].value || "名前", 250, 180);
    ctx.fillText(values[3].value || "2000-01-01", 250, 210);
    ctx.fillText(values[4].value || "2030-03-31", 250, 240);

    // ③ 写真
    const file = document.getElementById("photo").files[0];
    if (file) {
      const p = new Image();
      p.src = URL.createObjectURL(file);
      p.onload = () => {
        ctx.drawImage(p, 40, 90, 120, 160);
      };
    }
  };
}

// 入力変更で再描画
document.querySelectorAll("input, select").forEach(e =>
  e.addEventListener("change", draw)
);

</script>

</body>
</html>
